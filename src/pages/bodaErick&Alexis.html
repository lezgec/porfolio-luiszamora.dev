<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Erick & Alexis ‚Äî √Ålbum de la boda</title>

  <!-- Tipos similares (script elegante + serif) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">

  <style>
:root{
  --navy-0:#071426;
  --navy-1:#081A2F;
  --navy-2:#0B223A;
  --gold:#B7925D;
  --gold-2:#D8C29A;
  --ink:#ECF1F7;
  --muted:#B8C3D0;
  --stroke: rgba(255,255,255,.14);
  --shadow: 0 18px 55px rgba(0,0,0,.45);
  --r: 18px;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  color: var(--ink);
  font-family: "Cormorant Garamond", serif;
  background: linear-gradient(180deg, var(--navy-0), var(--navy-2));
}

.wrap{
  max-width: 980px;
  margin: auto;
  padding: 16px;
}

.card{
  border: 1px solid var(--stroke);
  border-radius: calc(var(--r) + 10px);
  box-shadow: var(--shadow);
}

.inner{ padding: 18px; }

.header{
  text-align:center;
}

.names{
  font-family: "Allura", cursive;
  font-size: clamp(46px, 7vw, 86px);
  color: var(--gold-2);
  margin:0;
}

.subtitle{
  text-align:center;
  color: var(--muted);
  font-size: 14px;
  letter-spacing: .14em;
  margin-top: 8px;
}

.divider{
  width: 80%;
  height: 1px;
  margin: 14px auto;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.date{
  text-align:center;
  font-size: clamp(38px, 6vw, 64px);
  color: var(--gold-2);
  margin-top: 12px;
}

.filebox{
  margin-top: 16px;
  border: 1px dashed rgba(183,146,93,.55);
  border-radius: var(--r);
  padding: 16px;
}

.pick-btn{
  width: 100%;
  border: 1px dashed rgba(183,146,93,.65);
  background: rgba(8,25,43,.35);
  border-radius: 18px;
  padding: 18px;
  color: var(--ink);
  cursor: pointer;
  display: grid;
  gap: 6px;
  justify-items: center;
  transition: all .15s ease;
}

.pick-btn:hover{
  background: rgba(255,255,255,.08);
  border-color: var(--gold-2);
}

.pick-text{
  font-size: 22px;
  font-weight: 700;
  color: var(--gold-2);
}

.pick-sub{
  font-size: 14px;
  color: var(--muted);
}

.controls{
  margin-top: 14px;
  display:flex;
  gap: 10px;
  justify-content:center;
}

button{
  padding: 12px 16px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  color: var(--ink);
  cursor:pointer;
}

button.primary{
  background: linear-gradient(180deg, rgba(183,146,93,.95), rgba(183,146,93,.75));
  color:#0B1A2A;
}

.bar{
  margin-top: 12px;
  height: 10px;
  background: rgba(255,255,255,.1);
  border-radius: 999px;
  overflow:hidden;
}

.bar div{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, var(--gold-2), var(--gold));
  transition: width .2s linear;
}

.grid{
  margin-top: 16px;
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(160px,1fr));
  gap: 12px;
}

.thumb{
  border-radius: var(--r);
  overflow:hidden;
  background: rgba(255,255,255,.05);
}

.thumb img,
.thumb video{
  width:100%;
  height:160px;
  object-fit:cover;
}

.log{
  margin-top: 10px;
  font-size: 13px;
  color: var(--muted);
}

.ok{ color:#63f0c0; }
.err{ color:#ff7b7b; }
.warn{ color:#ffd37a; }

.thumb{
  position: relative;
}

.remove-x{
  position:absolute;
  top:6px;
  right:6px;
  width:26px;
  height:26px;
  border-radius:50%;
  border: 1px solid rgba(183,146,93,.65);
  background: rgba(7,20,38,.85);
  color: var(--gold-2);
  font-size: 18px;
  line-height: 24px;
  text-align:center;
  cursor:pointer;
  font-weight: 700;
  backdrop-filter: blur(6px);
  transition: transform .12s ease, background .2s ease;
}

.remove-x:hover{
  background: rgba(255,255,255,.12);
  transform: scale(1.1);
}

</style>

</head>

<body>
  <div class="wrap">
  <div class="card">
    <div class="inner">

      <div class="header">
        <h1 class="names">Erick & Alexis</h1>
        <div class="subtitle">¬°Nos casamos!</div>
        <div class="divider"></div>
      </div>

      <div class="subtitle">
        Comparte con nosotros los recuerdos de este d√≠a tan especial
      </div>

      <div class="date">31.01.26</div>

      <div class="filebox">
        <input id="files" type="file" accept="image/*,video/*" multiple hidden>

        <button id="pickBtn" type="button" class="pick-btn">
          <span class="pick-text">Presione aqu√≠</span>
          <span class="pick-sub">para elegir fotos y videos</span>
        </button>

        <div class="subtitle" id="stats">0 archivos seleccionados</div>

        <div class="controls">
          <button id="uploadBtn" class="primary">Subir</button>
          <button id="clearBtn">Limpiar</button>
        </div>

        <div class="bar">
          <div id="barFill"></div>
        </div>

        <div class="log" id="log"></div>
      </div>

      <div class="grid" id="grid"></div>

    </div>
  </div>
</div>


  <script>
const CLOUD_NAME = "dpy74trye";
const UPLOAD_PRESET = "luiszamora.dev";
const FOLDER = "mi-boda-2026";

const filesInput = document.getElementById("files");
const pickBtn = document.getElementById("pickBtn");
const uploadBtn = document.getElementById("uploadBtn");
const clearBtn = document.getElementById("clearBtn");
const grid = document.getElementById("grid");
const logEl = document.getElementById("log");
const statsEl = document.getElementById("stats");
const barFill = document.getElementById("barFill");

function resetAll(showMessage = true){
  selectedFiles = [];
  filesInput.value = "";
  grid.innerHTML = "";
  barFill.style.width = "0%";
  statsEl.textContent = "0 archivos seleccionados";

  if (showMessage) {
    logEl.innerHTML = `<div class="ok">üéâ ¬°Listo! Archivos subidos correctamente. Gracias por compartir üíõ</div>`;
  } else {
    logEl.innerHTML = "";
  }
}


let selectedFiles = [];

pickBtn.onclick = () => filesInput.click();

filesInput.onchange = () => {
  for (const f of filesInput.files) selectedFiles.push(f);
  statsEl.textContent = `${selectedFiles.length} archivo(s) seleccionados`;
  render();
};

clearBtn.onclick = () => {
  selectedFiles = [];
  grid.innerHTML = "";
  logEl.innerHTML = "";
  statsEl.textContent = "0 archivos seleccionados";
  barFill.style.width = "0%";
};

function render(){
  grid.innerHTML = "";

  selectedFiles.forEach((file, index) => {
    const box = document.createElement("div");
    box.className = "thumb";

    // ‚ùå Bot√≥n eliminar
    const removeBtn = document.createElement("button");
    removeBtn.className = "remove-x";
    removeBtn.type = "button";
    removeBtn.textContent = "√ó";

    removeBtn.onclick = () => {
      selectedFiles.splice(index, 1);
      statsEl.textContent = `${selectedFiles.length} archivo(s) seleccionados`;
      render();
    };

    box.appendChild(removeBtn);

    // Preview
    if (file.type.startsWith("video")) {
      const video = document.createElement("video");
      video.src = URL.createObjectURL(file);
      video.controls = true;
      box.appendChild(video);
    } else {
      const img = document.createElement("img");
      img.src = URL.createObjectURL(file);
      img.alt = file.name;
      box.appendChild(img);
    }

    grid.appendChild(box);
  });
}

function uploadOne(file, index, total){
  return new Promise((resolve,reject)=>{
    const xhr = new XMLHttpRequest();
    const form = new FormData();

    form.append("file", file);
    form.append("upload_preset", UPLOAD_PRESET);
    form.append("folder", FOLDER);

    xhr.upload.onprogress = e => {
      if (!e.lengthComputable) return;
      const pct = ((index + e.loaded / e.total) / total) * 100;
      barFill.style.width = pct.toFixed(0) + "%";
    };

    xhr.onload = () => xhr.status === 200 ? resolve() : reject();
    xhr.onerror = reject;

    xhr.open("POST", `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/auto/upload`);
    xhr.send(form);
  });
}

uploadBtn.onclick = async () => {
  if (selectedFiles.length === 0) {
    logEl.innerHTML = `<div class="err">Selecciona al menos un archivo</div>`;
    return;
  }

  uploadBtn.disabled = true;
  clearBtn.disabled = true;

  for (let i = 0; i < selectedFiles.length; i++) {
    try {
      await uploadOne(
        selectedFiles[i],
        i,
        selectedFiles.length
      );
      logEl.innerHTML += `<div class="ok">‚úî Subido ${selectedFiles[i].name}</div>`;
    } catch {
      logEl.innerHTML += `<div class="err">‚úñ Error al subir ${selectedFiles[i].name}</div>`;
    }
  }

  // ‚úÖ LIMPIA TODO AL FINAL
  resetAll(true);

  uploadBtn.disabled = false;
  clearBtn.disabled = false;
};

</script>


</body>
</html>
